!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=class{constructor(e){this.params={},this.parseQueries(e)}parseQueries(e){const t=/([^&]+)=([^&]*)/g;for(;t.exec(e);)this.append(decodeURIComponent(RegExp.$1),decodeURIComponent(RegExp.$2))}append(e,t){if(!e||!t)throw new Error("key and value both required");const r=encodeURI(e),n=encodeURIComponent(t);this.params[r]=this.params[r]||[],-1===this.params[r].indexOf(n)&&this.params[r].push(n)}remove(e,t){if(t){const r=this.params[e].indexOf(t);-1!==r&&this.params[e].splice(r,1)}else delete this.params[e]}toString(){const e=[];return Object.entries(this.params).forEach(([t,r])=>{"order"===t||"select"===t?e.push(`${t}=${this.params[t].join(",")}`):r.forEach(r=>{e.push(`${t}=${r}`)})}),e.join("&")}};const o=["eq","neq","gt","gte","lt","lte","like","ilike","in","is","cs","cd"],i=["and","or"],s={like:"*%v*",ilike:"*%v*",in:"(%v)"};class u{constructor(e,t){this.axiosInstance=e,this.requestConfig=t,this.requestConfig.headers=this.requestConfig.headers||{};const[r,o]=this.requestConfig.url.split("?");this.requestConfig.url=r,this.params=new n(o),this.queries={},this.not_mode=!1}setQueries(e){return this.queries=e,this}setBody(e){return this.requestConfig.data=e,this}addHeader(e,t){return this.requestConfig.headers[e]=t,this}removeHeader(e){return delete this.requestConfig.headers[e],this}order(...e){const[t,r,n]=e,o=typeof r,i=typeof r;if("boolean"===o||"boolean"===i){if("string"!=typeof t)throw new TypeError("The key is not a string!");if("undefined"!==o&&"boolean"!==o)throw new TypeError("The ascending should be boolean or omitted!");if("undefined"!==i&&"boolean"!==i)throw new TypeError("The nullsfirst should be boolean or omitted!");let e=t;"boolean"!==o||r||(e+=".desc"),"boolean"===o&&(e+=n?".nullsfirst":".nullslast"),this.params.append("order",e)}else{if(e.some(e=>"string"!=typeof e))throw new TypeError("Arguement error, should be all string!");e.forEach(e=>this.params.append("order",e))}return this}select(...e){return e.forEach(e=>this.params.append("select",e)),this}pagination(e,t=10,r=!1){return this.requestConfig.pagination={pageIndex:e,pageSize:t},this.addHeader("Range-Unit","items"),this.addHeader("Range",`${(e-1)*t}-${e*t-1}`),r?this.addHeader("Prefer","count=exact"):"count=exact"===this.requestConfig.headers.Prefer&&this.removeHeader("Prefer"),this}get not(){return this.not_mode=!this.not_mode,this}_getSimpleSearchKeyAndValue(e,t,r=!1){const n=(r||this.not_mode?"not.":"")+e;return this.not_mode&&(this.not_mode=!1),t.map(t=>{let[,r,o,i]=/^(.*?)(?:\:(.*?))?(?:\|(.*?))?$/.exec(t);return i=i||s[e]||"%v",o=o||r,[r,`${n}.${i.replace("%v",this.queries[o])}`]})}_getGroupSearchKeyAndValue(e,t,r=!1){const n=this._withResendHandler(t),o=(r||this.not_mode?"not.":"")+e;return this.not_mode&&(this.not_mode=!1),[o,`(${n})`]}_withResendHandler(e){return e.map(e=>{if(Array.isArray(e)){const t=e[0];if(o.includes(t))return this._getSimpleSearchKeyAndValue.apply(this,e).map(([e,t])=>`${e}.${t}`).join(",");if(i.includes(t))return this._getGroupSearchKeyAndValue.apply(this,e).join("");throw new TypeError("Unknow operator "+t)}return e})}end(){return this.requestConfig.url+=`?${this.params.toString()}`,this.axiosInstance(this.requestConfig).then(e=>[null,e]).catch(e=>[e,null])}then(e){this.end().then(e)}}const a={not:{}};o.forEach(e=>{u.prototype[e]=function(...t){if(t.some(e=>"string"!=typeof e))throw new TypeError("Arguement error, should be all string!");return this._getSimpleSearchKeyAndValue(e,t).forEach(([e,t])=>this.params.append(e,t)),this},a[e]=function(...t){return[e,t]},a.not[e]=function(...t){return[e,t,!0]}}),i.forEach(e=>{u.prototype[e]=function(...t){const[r,n]=this._getGroupSearchKeyAndValue(e,this._withResendHandler(t));return this.params.append(r,n),this},a[e]=function(...t){return[e,t]},a.not[e]=function(...t){return[e,t,!0]}});var d=u;const{not:c,eq:h,neq:f,gt:l,gte:p,lt:m,lte:g,like:y,ilike:b,in:_,is:q,cs:w,cd:x,and:v,or:E}=a;r.d(t,"PGHelper",function(){return S}),r.d(t,"not",function(){return c}),r.d(t,"eq",function(){return h}),r.d(t,"neq",function(){return f}),r.d(t,"gt",function(){return l}),r.d(t,"gte",function(){return p}),r.d(t,"lt",function(){return m}),r.d(t,"lte",function(){return g}),r.d(t,"like",function(){return y}),r.d(t,"ilike",function(){return b}),r.d(t,"_in",function(){return _}),r.d(t,"is",function(){return q}),r.d(t,"cs",function(){return w}),r.d(t,"cd",function(){return x}),r.d(t,"and",function(){return v}),r.d(t,"or",function(){return E});class S{constructor(e){this.axiosInstance=e}request(e){return new d(this.axiosInstance,e)}}["get","delete","head","options","post","put","patch"].forEach(e=>{S.prototype[e]=function(t){return this.request({url:t,method:e})}});t.default=S}])});